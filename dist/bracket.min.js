!function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e,t){var r=e||"",n=Object.assign({},o,t),u={};return r=r.replace(n.blockDef,function(e,t,r,n){var o=a.context("block.def");return o.debug(t+" accepting "+r),u[t]={args:r.split(",").map(function(e){return e.trim()}),body:n},""}).replace(n.block,function(e,t,r){var o=a.context("block.call");if(!u[t])return o.debug("Block doesn't exist"),"";o.debug("Calling "+t+" with "+r);var c=[];r.replace(n.argValues,function(e,t){c.push(t)});var l=u[t].args.reduce(function(e,t,r){var n=e;return n[t]=c.length<=r?void 0:c[r],n},{});o.debug("Lookup args:",l);var i=u[t].body.replace(n.interpolate,function(e,t){var r=t.trim(),n=r.split(".")[0];if(!(n in l))return e;var a="var "+n+"="+l[n]+";return "+r+";";o.debug("Arg retrieval for "+r+" ("+n+") -> "+a);var u=Function(a)();return"';out+="+JSON.stringify(u)+";out+='"});return o.debug("Replaced:",i),i}).replace(n.interpolate,function(e,t){return"';out+="+t.trim()+";out+='"}).replace(n.evaluate,function(e,t){return"';"+t.trim()+"out+='"}),r=("var out='"+r+"';return out;").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,""),a.context("template").debug("Generated template function:",r),new Function(n.varname,r)}Object.defineProperty(t,"__esModule",{value:!0});var o={log:!1,evaluate:/\[\[([\s\S]+?(\}?)+)]]/g,interpolate:/\[\[=([\s\S]+?)]]/g,block:/\[\[#\s*([\w]+)\(([\s\S]*?)\)\s*]]/g,blockDef:/\[\[##\s*([\w]+)\(([\s\w,]*)\)\s*[\n]([\s\S]*?)\n\s*#]]/g,argValues:/\s*({[\s\S]*?}|[^,]+)/g,varname:"model"},a={context:function(e){var t={debug:function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];if(o.log){var a;(a=console).log.apply(a,[e,": "].concat(r))}}};return t}},u={version:"0.0.1",logger:a,settings:o,template:n},c="undefined"!=typeof window;c?(a.context("global").debug("Browser context, adding to window.bracket"),window.bracket=u):a.context("global").debug("Node context"),t.default=u}]);