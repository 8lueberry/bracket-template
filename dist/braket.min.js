!function(n){function c(e){if(g[e])return g[e].exports;var t=g[e]={exports:{},id:e,loaded:!1};return n[e].call(t.exports,t,t.exports,c),t.loaded=!0,t.exports}var g={};return c.m=n,c.c=g,c.p="",c(0)}([function(module,exports,__webpack_require__){eval("'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _package = __webpack_require__(1);\n\nvar _package2 = _interopRequireDefault(_package);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar settings = {\n  log: false,\n\n  // Extract anything inside [[ ]] to be evaluated as js\n  evaluate: /\\[\\[([\\s\\S]+?(\\}?)+)]]/g,\n\n  // Extract anything in the form [[= model ]]\n  interpolate: /\\[\\[=([\\s\\S]+?)]]/g,\n\n  // Extract any block call [[# block1('arg') ]]\n  block: /\\[\\[#\\s*([\\w]+)\\(([\\s\\S]*?)\\)\\s*]]/g,\n\n  // Extract any block definition [[## block1(arg) #]]\n  blockDef: /\\[\\[##\\s*([\\w]+)\\(([\\s\\S]*)\\)\\s*[\\n]([\\s\\S]*)\\n\\s*#]]/g,\n\n  // extract the argument values from a function call\n  // e.g. { test1: '123', test2: 456, test3: true }, 'aaa', true, {}, ''\n  argValues: /\\s*({[\\s\\S]*?}|[^,]+)/g,\n\n  // The params to pass to the template function\n  // For multiple params, comma delimited e.g. 'model,model2,model3...'\n  varname: 'model'\n};\n\nvar logger = {\n  // enables the log\n  enable: false,\n\n  context: function context(name) {\n    var result = {\n      debug: function debug() {\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n\n        if (settings.log) {\n          var _console;\n\n          (_console = console).log.apply(_console, [name].concat(args));\n        }\n      }\n    };\n    return result;\n  }\n};\n\nfunction template(tmpl, conf) {\n  var str = tmpl || '';\n  var c = Object.assign({}, settings, conf);\n  var blocks = {};\n\n  str = str\n  // handle section def\n  .replace(c.blockDef, function (m, name, args, body) {\n    var log = logger.context('block.def');\n    log.debug(name + ' accepting ' + args);\n\n    blocks[name] = {\n      args: args.split(',').map(function (a) {\n        return a.trim();\n      }),\n      body: body\n    };\n    return '';\n  })\n\n  // handle section call\n  .replace(c.block, function (m, name, args) {\n    var log = logger.context('block.call');\n\n    if (!blocks[name]) {\n      log.debug('Block doesn\\'t exist');\n      return '';\n    }\n\n    log.debug('Calling ' + name + ' with ' + args);\n\n    // arg -> value\n    var argValues = [];\n    args.replace(c.argValues, function (m2, val) {\n      argValues.push(val);\n    });\n    var lookup = blocks[name].args.reduce(function (res, k, i) {\n      var hash = res;\n      hash[k] = argValues.length <= i ? undefined : argValues[i];\n      return hash;\n    }, {});\n\n    log.debug('Lookup args:', lookup);\n\n    var blockStr = blocks[name].body.replace(c.interpolate, function (m2, codeVal) {\n      var code = codeVal.trim();\n\n      // support obj.arg\n      var key = code.split('.')[0];\n      if (!(key in lookup)) {\n        return m2;\n      }\n\n      // Generate the value by making a scoped function\n      // e.g. function() { var arg = { test1: '123' }; return arg.test1; }\n      var valStr = 'var ' + key + '=' + lookup[key] + ';return ' + code + ';';\n      log.debug('Arg retrieval for ' + code + ' (' + key + ') -> ' + valStr);\n      var val = Function(valStr)(); // eslint-disable-line\n\n      return '\\';out+=' + JSON.stringify(val) + ';out+=\\'';\n    });\n\n    log.debug('Replaced:', blockStr);\n    return blockStr;\n  })\n\n  // convert models\n  .replace(c.interpolate, function (m, code) {\n    return '\\';out+=' + code.trim() + ';out+=\\'';\n  })\n\n  // raw js\n  .replace(c.evaluate, function (m, code) {\n    return '\\';' + code.trim() + 'out+=\\'';\n  });\n\n  // build the template function body\n  str = ('var out=\\'' + str + '\\';return out;'\n  // remove the newlines or '' will break\n  ).replace(/\\r/g, '\\\\r').replace(/\\n/g, '\\\\n').replace(/\\t/g, '\\\\t').replace(/(\\s|;|\\}|^|\\{)out\\+='';/g, '$1').replace(/\\+''/g, '');\n\n  logger.context('template').debug('Generated template function:', str);\n  return new Function(c.varname, str); // eslint-disable-line\n}\n\nexports.default = {\n  version: _package2.default.version,\n  logger: logger,\n  settings: settings,\n  template: template\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMC5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy9pbmRleC5qcz8xNjg3Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBwa2cgZnJvbSAnLi9wYWNrYWdlJztcblxuY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGxvZzogZmFsc2UsXG5cbiAgLy8gRXh0cmFjdCBhbnl0aGluZyBpbnNpZGUgW1sgXV0gdG8gYmUgZXZhbHVhdGVkIGFzIGpzXG4gIGV2YWx1YXRlOiAvXFxbXFxbKFtcXHNcXFNdKz8oXFx9PykrKV1dL2csXG5cbiAgLy8gRXh0cmFjdCBhbnl0aGluZyBpbiB0aGUgZm9ybSBbWz0gbW9kZWwgXV1cbiAgaW50ZXJwb2xhdGU6IC9cXFtcXFs9KFtcXHNcXFNdKz8pXV0vZyxcblxuICAvLyBFeHRyYWN0IGFueSBibG9jayBjYWxsIFtbIyBibG9jazEoJ2FyZycpIF1dXG4gIGJsb2NrOiAvXFxbXFxbI1xccyooW1xcd10rKVxcKChbXFxzXFxTXSo/KVxcKVxccypdXS9nLFxuXG4gIC8vIEV4dHJhY3QgYW55IGJsb2NrIGRlZmluaXRpb24gW1sjIyBibG9jazEoYXJnKSAjXV1cbiAgYmxvY2tEZWY6IC9cXFtcXFsjI1xccyooW1xcd10rKVxcKChbXFxzXFxTXSopXFwpXFxzKltcXG5dKFtcXHNcXFNdKilcXG5cXHMqI11dL2csXG5cbiAgLy8gZXh0cmFjdCB0aGUgYXJndW1lbnQgdmFsdWVzIGZyb20gYSBmdW5jdGlvbiBjYWxsXG4gIC8vIGUuZy4geyB0ZXN0MTogJzEyMycsIHRlc3QyOiA0NTYsIHRlc3QzOiB0cnVlIH0sICdhYWEnLCB0cnVlLCB7fSwgJydcbiAgYXJnVmFsdWVzOiAvXFxzKih7W1xcc1xcU10qP318W14sXSspL2csXG5cbiAgLy8gVGhlIHBhcmFtcyB0byBwYXNzIHRvIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvblxuICAvLyBGb3IgbXVsdGlwbGUgcGFyYW1zLCBjb21tYSBkZWxpbWl0ZWQgZS5nLiAnbW9kZWwsbW9kZWwyLG1vZGVsMy4uLidcbiAgdmFybmFtZTogJ21vZGVsJyxcbn07XG5cbmNvbnN0IGxvZ2dlciA9IHtcbiAgLy8gZW5hYmxlcyB0aGUgbG9nXG4gIGVuYWJsZTogZmFsc2UsXG5cbiAgY29udGV4dDogKG5hbWUpID0+IHtcbiAgICBjb25zdCByZXN1bHQgPSB7XG4gICAgICBkZWJ1ZzogKC4uLmFyZ3MpID0+IHtcbiAgICAgICAgaWYgKHNldHRpbmdzLmxvZykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKG5hbWUsIC4uLmFyZ3MpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH07XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSxcbn07XG5cbmZ1bmN0aW9uIHRlbXBsYXRlKHRtcGwsIGNvbmYpIHtcbiAgbGV0IHN0ciA9IHRtcGwgfHwgJyc7XG4gIGNvbnN0IGMgPSBPYmplY3QuYXNzaWduKHt9LCBzZXR0aW5ncywgY29uZik7XG4gIGNvbnN0IGJsb2NrcyA9IHt9O1xuXG4gIHN0ciA9IHN0clxuICAgIC8vIGhhbmRsZSBzZWN0aW9uIGRlZlxuICAgIC5yZXBsYWNlKGMuYmxvY2tEZWYsIChtLCBuYW1lLCBhcmdzLCBib2R5KSA9PiB7XG4gICAgICBjb25zdCBsb2cgPSBsb2dnZXIuY29udGV4dCgnYmxvY2suZGVmJyk7XG4gICAgICBsb2cuZGVidWcoYCR7bmFtZX0gYWNjZXB0aW5nICR7YXJnc31gKTtcblxuICAgICAgYmxvY2tzW25hbWVdID0ge1xuICAgICAgICBhcmdzOiBhcmdzLnNwbGl0KCcsJykubWFwKGEgPT4gYS50cmltKCkpLFxuICAgICAgICBib2R5LFxuICAgICAgfTtcbiAgICAgIHJldHVybiAnJztcbiAgICB9KVxuXG4gICAgLy8gaGFuZGxlIHNlY3Rpb24gY2FsbFxuICAgIC5yZXBsYWNlKGMuYmxvY2ssIChtLCBuYW1lLCBhcmdzKSA9PiB7XG4gICAgICBjb25zdCBsb2cgPSBsb2dnZXIuY29udGV4dCgnYmxvY2suY2FsbCcpO1xuXG4gICAgICBpZiAoIWJsb2Nrc1tuYW1lXSkge1xuICAgICAgICBsb2cuZGVidWcoJ0Jsb2NrIGRvZXNuXFwndCBleGlzdCcpO1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIGxvZy5kZWJ1ZyhgQ2FsbGluZyAke25hbWV9IHdpdGggJHthcmdzfWApO1xuXG4gICAgICAvLyBhcmcgLT4gdmFsdWVcbiAgICAgIGNvbnN0IGFyZ1ZhbHVlcyA9IFtdO1xuICAgICAgYXJncy5yZXBsYWNlKGMuYXJnVmFsdWVzLCAobTIsIHZhbCkgPT4ge1xuICAgICAgICBhcmdWYWx1ZXMucHVzaCh2YWwpO1xuICAgICAgfSk7XG4gICAgICBjb25zdCBsb29rdXAgPSBibG9ja3NbbmFtZV0uYXJncy5yZWR1Y2UoKHJlcywgaywgaSkgPT4ge1xuICAgICAgICBjb25zdCBoYXNoID0gcmVzO1xuICAgICAgICBoYXNoW2tdID0gYXJnVmFsdWVzLmxlbmd0aCA8PSBpID8gdW5kZWZpbmVkIDogYXJnVmFsdWVzW2ldO1xuICAgICAgICByZXR1cm4gaGFzaDtcbiAgICAgIH0sIHt9KTtcblxuICAgICAgbG9nLmRlYnVnKCdMb29rdXAgYXJnczonLCBsb29rdXApO1xuXG4gICAgICBjb25zdCBibG9ja1N0ciA9IGJsb2Nrc1tuYW1lXS5ib2R5LnJlcGxhY2UoYy5pbnRlcnBvbGF0ZSwgKG0yLCBjb2RlVmFsKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBjb2RlVmFsLnRyaW0oKTtcblxuICAgICAgICAvLyBzdXBwb3J0IG9iai5hcmdcbiAgICAgICAgY29uc3Qga2V5ID0gY29kZS5zcGxpdCgnLicpWzBdO1xuICAgICAgICBpZiAoIShrZXkgaW4gbG9va3VwKSkge1xuICAgICAgICAgIHJldHVybiBtMjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdlbmVyYXRlIHRoZSB2YWx1ZSBieSBtYWtpbmcgYSBzY29wZWQgZnVuY3Rpb25cbiAgICAgICAgLy8gZS5nLiBmdW5jdGlvbigpIHsgdmFyIGFyZyA9IHsgdGVzdDE6ICcxMjMnIH07IHJldHVybiBhcmcudGVzdDE7IH1cbiAgICAgICAgY29uc3QgdmFsU3RyID0gYHZhciAke2tleX09JHtsb29rdXBba2V5XX07cmV0dXJuICR7Y29kZX07YDtcbiAgICAgICAgbG9nLmRlYnVnKGBBcmcgcmV0cmlldmFsIGZvciAke2NvZGV9ICgke2tleX0pIC0+ICR7dmFsU3RyfWApO1xuICAgICAgICBjb25zdCB2YWwgPSBGdW5jdGlvbih2YWxTdHIpKCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcblxuICAgICAgICByZXR1cm4gYCc7b3V0Kz0ke0pTT04uc3RyaW5naWZ5KHZhbCl9O291dCs9J2A7XG4gICAgICB9KTtcblxuICAgICAgbG9nLmRlYnVnKCdSZXBsYWNlZDonLCBibG9ja1N0cik7XG4gICAgICByZXR1cm4gYmxvY2tTdHI7XG4gICAgfSlcblxuICAgIC8vIGNvbnZlcnQgbW9kZWxzXG4gICAgLnJlcGxhY2UoYy5pbnRlcnBvbGF0ZSwgKG0sIGNvZGUpID0+IGAnO291dCs9JHtjb2RlLnRyaW0oKX07b3V0Kz0nYClcblxuICAgIC8vIHJhdyBqc1xuICAgIC5yZXBsYWNlKGMuZXZhbHVhdGUsIChtLCBjb2RlKSA9PiBgJzske2NvZGUudHJpbSgpfW91dCs9J2ApO1xuXG4gIC8vIGJ1aWxkIHRoZSB0ZW1wbGF0ZSBmdW5jdGlvbiBib2R5XG4gIHN0ciA9IGB2YXIgb3V0PScke3N0cn0nO3JldHVybiBvdXQ7YFxuICAgIC8vIHJlbW92ZSB0aGUgbmV3bGluZXMgb3IgJycgd2lsbCBicmVha1xuICAgIC5yZXBsYWNlKC9cXHIvZywgJ1xcXFxyJykucmVwbGFjZSgvXFxuL2csICdcXFxcbicpLnJlcGxhY2UoL1xcdC9nLCAnXFxcXHQnKVxuXHRcdC5yZXBsYWNlKC8oXFxzfDt8XFx9fF58XFx7KW91dFxcKz0nJzsvZywgJyQxJykucmVwbGFjZSgvXFwrJycvZywgJycpO1xuXG4gIGxvZ2dlci5jb250ZXh0KCd0ZW1wbGF0ZScpLmRlYnVnKCdHZW5lcmF0ZWQgdGVtcGxhdGUgZnVuY3Rpb246Jywgc3RyKTtcbiAgcmV0dXJuIG5ldyBGdW5jdGlvbihjLnZhcm5hbWUsIHN0cik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmVcbn1cblxuZXhwb3J0IGRlZmF1bHQge1xuICB2ZXJzaW9uOiBwa2cudmVyc2lvbixcbiAgbG9nZ2VyLFxuICBzZXR0aW5ncyxcbiAgdGVtcGxhdGUsXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogaW5kZXguanNcbiAqKi8iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7Ozs7O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7OztBQUdBO0FBckJBO0FBQ0E7QUF1QkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFBQTtBQUNBO0FBQUE7QUFDQTtBQUNBO0FBTEE7QUFPQTtBQUNBO0FBYkE7QUFDQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFBQTtBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFBQTtBQUFBO0FBQ0E7QUFGQTtBQUlBO0FBQ0E7QUFDQTs7QUFaQTtBQWVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUExREE7QUE0REE7QUFBQTtBQUNBOztBQTdEQTtBQStEQTtBQUFBO0FBQ0E7O0FBRUE7O0FBQUE7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUpBIiwic291cmNlUm9vdCI6IiJ9")},function(module,exports){eval('module.exports = {\n	"name": "bracket",\n	"version": "0.0.1",\n	"description": "Javascript templates",\n	"repository": {\n		"type": "git",\n		"url": "https://github.com/danlevan/bracket.git"\n	},\n	"main": "index.js",\n	"scripts": {\n		"test": "./node_modules/.bin/babel-node tests/run.js",\n		"start": "./node_modules/.bin/babel-node index.js --debug",\n		"build": "./node_modules/.bin/babel-node ./scripts/build.js"\n	},\n	"author": "",\n	"license": "ISC",\n	"devDependencies": {\n		"babel-cli": "^6.7.7",\n		"babel-eslint": "^6.0.2",\n		"babel-loader": "^6.2.4",\n		"babel-plugin-transform-runtime": "^6.9.0",\n		"babel-preset-es2015": "^6.6.0",\n		"babel-preset-stage-0": "^6.5.0",\n		"eslint": "^2.8.0",\n		"eslint-config-airbnb": "^8.0.0",\n		"eslint-plugin-import": "^1.6.1",\n		"eslint-plugin-jsx-a11y": "^1.0.4",\n		"eslint-plugin-react": "^5.0.1",\n		"jasmine": "^2.4.1",\n		"json-loader": "^0.5.4",\n		"webpack": "^1.13.1"\n	}\n};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMS5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3BhY2thZ2UuanNvbj83MGZmIl0sInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZS5leHBvcnRzID0ge1xuXHRcIm5hbWVcIjogXCJicmFja2V0XCIsXG5cdFwidmVyc2lvblwiOiBcIjAuMC4xXCIsXG5cdFwiZGVzY3JpcHRpb25cIjogXCJKYXZhc2NyaXB0IHRlbXBsYXRlc1wiLFxuXHRcInJlcG9zaXRvcnlcIjoge1xuXHRcdFwidHlwZVwiOiBcImdpdFwiLFxuXHRcdFwidXJsXCI6IFwiaHR0cHM6Ly9naXRodWIuY29tL2RhbmxldmFuL2JyYWNrZXQuZ2l0XCJcblx0fSxcblx0XCJtYWluXCI6IFwiaW5kZXguanNcIixcblx0XCJzY3JpcHRzXCI6IHtcblx0XHRcInRlc3RcIjogXCIuL25vZGVfbW9kdWxlcy8uYmluL2JhYmVsLW5vZGUgdGVzdHMvcnVuLmpzXCIsXG5cdFx0XCJzdGFydFwiOiBcIi4vbm9kZV9tb2R1bGVzLy5iaW4vYmFiZWwtbm9kZSBpbmRleC5qcyAtLWRlYnVnXCIsXG5cdFx0XCJidWlsZFwiOiBcIi4vbm9kZV9tb2R1bGVzLy5iaW4vYmFiZWwtbm9kZSAuL3NjcmlwdHMvYnVpbGQuanNcIlxuXHR9LFxuXHRcImF1dGhvclwiOiBcIlwiLFxuXHRcImxpY2Vuc2VcIjogXCJJU0NcIixcblx0XCJkZXZEZXBlbmRlbmNpZXNcIjoge1xuXHRcdFwiYmFiZWwtY2xpXCI6IFwiXjYuNy43XCIsXG5cdFx0XCJiYWJlbC1lc2xpbnRcIjogXCJeNi4wLjJcIixcblx0XHRcImJhYmVsLWxvYWRlclwiOiBcIl42LjIuNFwiLFxuXHRcdFwiYmFiZWwtcGx1Z2luLXRyYW5zZm9ybS1ydW50aW1lXCI6IFwiXjYuOS4wXCIsXG5cdFx0XCJiYWJlbC1wcmVzZXQtZXMyMDE1XCI6IFwiXjYuNi4wXCIsXG5cdFx0XCJiYWJlbC1wcmVzZXQtc3RhZ2UtMFwiOiBcIl42LjUuMFwiLFxuXHRcdFwiZXNsaW50XCI6IFwiXjIuOC4wXCIsXG5cdFx0XCJlc2xpbnQtY29uZmlnLWFpcmJuYlwiOiBcIl44LjAuMFwiLFxuXHRcdFwiZXNsaW50LXBsdWdpbi1pbXBvcnRcIjogXCJeMS42LjFcIixcblx0XHRcImVzbGludC1wbHVnaW4tanN4LWExMXlcIjogXCJeMS4wLjRcIixcblx0XHRcImVzbGludC1wbHVnaW4tcmVhY3RcIjogXCJeNS4wLjFcIixcblx0XHRcImphc21pbmVcIjogXCJeMi40LjFcIixcblx0XHRcImpzb24tbG9hZGVyXCI6IFwiXjAuNS40XCIsXG5cdFx0XCJ3ZWJwYWNrXCI6IFwiXjEuMTMuMVwiXG5cdH1cbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3BhY2thZ2UuanNvblxuICoqIG1vZHVsZSBpZCA9IDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9')}]);